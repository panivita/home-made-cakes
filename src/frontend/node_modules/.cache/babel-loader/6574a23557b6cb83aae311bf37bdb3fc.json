{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Projects\\\\hyf-homework\\\\nodejs\\\\week4\\\\meal-sharing\\\\src\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Projects\\\\hyf-homework\\\\nodejs\\\\week4\\\\meal-sharing\\\\src\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Projects\\\\hyf-homework\\\\nodejs\\\\week4\\\\meal-sharing\\\\src\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from\"react\";import{useHistory}from\"react-router-dom\";import\"./search-page.css\";export var Auto=function Auto(){var history=useHistory();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),search=_useState2[0],setSearch=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),display=_useState4[0],setDisplay=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),options=_useState6[0],setOptions=_useState6[1];var wrapperRef=useRef(null);useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/meals?title=\"+search);case 2:response=_context.sent;_context.next=5;return response.json();case 5:result=_context.sent;setOptions(result);case 7:case\"end\":return _context.stop();}}},_callee);}))();},[search]);useEffect(function(){document.addEventListener(\"mousedown\",handleClickerOutside);return function(){document.removeEventListener(\"mousedown\",handleClickerOutside);};},[]);var handleClickerOutside=function handleClickerOutside(event){var wrap=wrapperRef.current;if(wrap&&!wrap.contains(event.target)){setDisplay(false);}};var goToCake=function goToCake(id){history.push(\"/cake/\"+id);};return/*#__PURE__*/React.createElement(\"div\",{ref:wrapperRef,className:\"search-container\"},/*#__PURE__*/React.createElement(\"input\",{className:\"search-input\",onClick:function onClick(){if(search){setDisplay(!display);}},placeholder:\"Find your favorite cake\",value:search,onChange:function onChange(event){return setSearch(event.target.value);}}),display&&/*#__PURE__*/React.createElement(\"div\",{className:\"auto-container\"},options.map(function(_ref2){var id=_ref2.id,title=_ref2.title;return/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return goToCake(id);},className:\"options\",key:id,tabIndex:\"0\"},/*#__PURE__*/React.createElement(\"span\",null,title));})));};","map":{"version":3,"sources":["C:/Projects/hyf-homework/nodejs/week4/meal-sharing/src/frontend/src/pages/search-page.js"],"names":["React","useState","useEffect","useRef","useHistory","Auto","history","search","setSearch","display","setDisplay","options","setOptions","wrapperRef","fetch","response","json","result","document","addEventListener","handleClickerOutside","removeEventListener","event","wrap","current","contains","target","goToCake","id","push","value","map","title"],"mappings":"mkBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,MAArC,KAAmD,OAAnD,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAO,mBAAP,CAEA,MAAO,IAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAM,CACxB,GAAMC,CAAAA,OAAO,CAAGF,UAAU,EAA1B,CADwB,cAEIH,QAAQ,CAAC,EAAD,CAFZ,wCAEjBM,MAFiB,eAETC,SAFS,8BAGMP,QAAQ,CAAC,KAAD,CAHd,yCAGjBQ,OAHiB,eAGRC,UAHQ,8BAIMT,QAAQ,CAAC,EAAD,CAJd,yCAIjBU,OAJiB,eAIRC,UAJQ,eAKxB,GAAMC,CAAAA,UAAU,CAAGV,MAAM,CAAC,IAAD,CAAzB,CAEAD,SAAS,CAAC,UAAM,CACd,wDAAC,6KACwBY,CAAAA,KAAK,CAC1B,oBAAsBP,MADI,CAD7B,QACOQ,QADP,qCAIsBA,CAAAA,QAAQ,CAACC,IAAT,EAJtB,QAIOC,MAJP,eAKCL,UAAU,CAACK,MAAD,CAAV,CALD,sDAAD,KAOD,CARQ,CAQN,CAACV,MAAD,CARM,CAAT,CAUAL,SAAS,CAAC,UAAM,CACdgB,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,CAAuCC,oBAAvC,EACA,MAAO,WAAM,CACXF,QAAQ,CAACG,mBAAT,CAA6B,WAA7B,CAA0CD,oBAA1C,EACD,CAFD,CAGD,CALQ,CAKN,EALM,CAAT,CAOA,GAAMA,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAACE,KAAD,CAAW,IACrBC,CAAAA,IADqB,CACZV,UADY,CAC9BW,OAD8B,CAEtC,GAAID,IAAI,EAAI,CAACA,IAAI,CAACE,QAAL,CAAcH,KAAK,CAACI,MAApB,CAAb,CAA0C,CACxChB,UAAU,CAAC,KAAD,CAAV,CACD,CACF,CALD,CAMA,GAAMiB,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,EAAD,CAAQ,CACvBtB,OAAO,CAACuB,IAAR,CAAa,SAAWD,EAAxB,EACD,CAFD,CAGA,mBACE,2BAAK,GAAG,CAAEf,UAAV,CAAsB,SAAS,CAAC,kBAAhC,eACE,6BACE,SAAS,CAAC,cADZ,CAEE,OAAO,CAAE,kBAAM,CACb,GAAIN,MAAJ,CAAY,CACVG,UAAU,CAAC,CAACD,OAAF,CAAV,CACD,CACF,CANH,CAOE,WAAW,CAAC,yBAPd,CAQE,KAAK,CAAEF,MART,CASE,QAAQ,CAAE,kBAACe,KAAD,QAAWd,CAAAA,SAAS,CAACc,KAAK,CAACI,MAAN,CAAaI,KAAd,CAApB,EATZ,EADF,CAYGrB,OAAO,eACN,2BAAK,SAAS,CAAC,gBAAf,EACGE,OAAO,CAACoB,GAAR,CAAY,mBAAGH,CAAAA,EAAH,OAAGA,EAAH,CAAOI,KAAP,OAAOA,KAAP,oBACX,2BACE,OAAO,CAAE,yBAAML,CAAAA,QAAQ,CAACC,EAAD,CAAd,EADX,CAEE,SAAS,CAAC,SAFZ,CAGE,GAAG,CAAEA,EAHP,CAIE,QAAQ,CAAC,GAJX,eAME,gCAAOI,KAAP,CANF,CADW,EAAZ,CADH,CAbJ,CADF,CA6BD,CA9DM","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"./search-page.css\";\r\n\r\nexport const Auto = () => {\r\n  const history = useHistory();\r\n  const [search, setSearch] = useState(\"\");\r\n  const [display, setDisplay] = useState(false);\r\n  const [options, setOptions] = useState([]);\r\n  const wrapperRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const response = await fetch(\r\n        \"/api/meals?title=\" + search\r\n      );\r\n      const result = await response.json();\r\n      setOptions(result);\r\n    })();\r\n  }, [search]);\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"mousedown\", handleClickerOutside);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickerOutside);\r\n    };\r\n  }, []);\r\n\r\n  const handleClickerOutside = (event) => {\r\n    const { current: wrap } = wrapperRef;\r\n    if (wrap && !wrap.contains(event.target)) {\r\n      setDisplay(false);\r\n    }\r\n  };\r\n  const goToCake = (id) => {\r\n    history.push(\"/cake/\" + id);\r\n  };\r\n  return (\r\n    <div ref={wrapperRef} className=\"search-container\">\r\n      <input\r\n        className=\"search-input\"\r\n        onClick={() => {\r\n          if (search) {\r\n            setDisplay(!display);\r\n          }\r\n        }}\r\n        placeholder=\"Find your favorite cake\"\r\n        value={search}\r\n        onChange={(event) => setSearch(event.target.value)}\r\n      />\r\n      {display && (\r\n        <div className=\"auto-container\">\r\n          {options.map(({ id, title }) => (\r\n            <div\r\n              onClick={() => goToCake(id)}\r\n              className=\"options\"\r\n              key={id}\r\n              tabIndex=\"0\"\r\n            >\r\n              <span>{title}</span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}